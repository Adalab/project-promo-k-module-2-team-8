"use strict";const designContainer=document.querySelector(".js-design"),fillContainer=document.querySelector(".js-fill"),shareContainer=document.querySelector(".js-share"),designCollapsable=document.querySelector(".js-design-collapsable"),fillCollapsable=document.querySelector(".js-fill-collapsable"),shareCollapsable=document.querySelector(".js-share-collapsable"),designArrow=document.querySelector(".js-arrow-design"),fillArrow=document.querySelector(".js-arrow-fill"),shareArrow=document.querySelector(".js-arrow-share");function openCollapsableDesign(){designContainer.classList.toggle("hidden"),fillContainer.classList.add("hidden"),shareContainer.classList.add("hidden"),designArrow.classList.toggle("arrow-up")}function openCollapsableFill(){fillContainer.classList.toggle("hidden"),designContainer.classList.add("hidden"),shareContainer.classList.add("hidden"),fillArrow.classList.toggle("arrow-up")}function openCollapsableShare(){shareContainer.classList.toggle("hidden"),designContainer.classList.add("hidden"),fillContainer.classList.add("hidden"),shareArrow.classList.toggle("arrow-up")}designCollapsable.addEventListener("click",openCollapsableDesign),fillCollapsable.addEventListener("click",openCollapsableFill),shareCollapsable.addEventListener("click",openCollapsableShare);const fr=new FileReader,uploadBtn=document.querySelector(".js__profile-trigger"),fileField=document.querySelector(".js__profile-upload-btn"),profileImage=document.querySelector(".js__profile-image"),profilePreview=document.querySelector(".js__profile-preview");function getImage(e){const r=e.currentTarget.files[0];fr.addEventListener("load",writeImage),fr.readAsDataURL(r)}function writeImage(){profileImage.style.backgroundImage=`url(${fr.result})`,profilePreview.style.backgroundImage=`url(${fr.result})`,data.photo=fr.result,setInLocalStorage()}function fakeFileClick(){fileField.click()}uploadBtn.addEventListener("click",fakeFileClick),fileField.addEventListener("change",getImage);const paletteGreen=document.querySelector(".js-palette-green"),paletteRed=document.querySelector(".js-palette-red"),paletteGrey=document.querySelector(".js-palette-grey"),paletteName=document.querySelector(".js-name"),paletteJob=document.querySelector(".js-job"),paletteBorder=document.querySelector(".js-border"),palettePhone=document.querySelector(".js-color-tel"),paletteEmail=document.querySelector(".js-color-email"),paletteLinkedin=document.querySelector(".js-color-linkedin"),paletteGithub=document.querySelector(".js-color-github"),paletteBorderPhone=document.querySelector(".js-border-tel"),paletteBorderEmail=document.querySelector(".js-border-email"),paletteBorderLinkedin=document.querySelector(".js-border-linkedin"),paletteBorderGithub=document.querySelector(".js-border-github");function changeColor(e){"color-palette-1"===e.currentTarget.value&&(paletteName.classList.remove("dark-grey"),paletteName.classList.remove("dark-red"),paletteJob.classList.remove("red"),paletteJob.classList.remove("yellow"),paletteBorder.classList.remove("red"),paletteBorder.classList.remove("yellow"),palettePhone.classList.remove("dark-red"),palettePhone.classList.remove("dark-grey"),paletteEmail.classList.remove("dark-red"),paletteEmail.classList.remove("dark-grey"),paletteLinkedin.classList.remove("dark-red"),paletteLinkedin.classList.remove("dark-grey"),paletteGithub.classList.remove("dark-red"),paletteGithub.classList.remove("dark-grey"),paletteBorderPhone.classList.remove("orange"),paletteBorderPhone.classList.remove("grey"),paletteBorderEmail.classList.remove("orange"),paletteBorderEmail.classList.remove("grey"),paletteBorderLinkedin.classList.remove("orange"),paletteBorderLinkedin.classList.remove("grey"),paletteBorderGithub.classList.remove("orange"),paletteBorderGithub.classList.remove("grey"),data.palette=1),"color-palette-2"===e.currentTarget.value&&(paletteName.classList.remove("dark-green"),paletteName.classList.remove("dark-grey"),paletteName.classList.add("dark-red"),paletteJob.classList.remove("green"),paletteJob.classList.remove("yellow"),paletteJob.classList.add("red"),paletteBorder.classList.remove("green"),paletteBorder.classList.remove("yellow"),paletteBorder.classList.add("red"),palettePhone.classList.remove("dark-green"),palettePhone.classList.remove("dark-grey"),palettePhone.classList.add("dark-red"),paletteEmail.classList.remove("dark-green"),paletteEmail.classList.remove("dark-grey"),paletteEmail.classList.add("dark-red"),paletteLinkedin.classList.remove("dark-green"),paletteLinkedin.classList.remove("dark-grey"),paletteLinkedin.classList.add("dark-red"),paletteGithub.classList.remove("dark-green"),paletteGithub.classList.remove("dark-grey"),paletteGithub.classList.add("dark-red"),paletteBorderPhone.classList.remove("green"),paletteBorderPhone.classList.remove("grey"),paletteBorderPhone.classList.add("orange"),paletteBorderEmail.classList.remove("green"),paletteBorderEmail.classList.remove("grey"),paletteBorderEmail.classList.add("orange"),paletteBorderLinkedin.classList.remove("green"),paletteBorderLinkedin.classList.remove("grey"),paletteBorderLinkedin.classList.add("orange"),paletteBorderGithub.classList.remove("green"),paletteBorderGithub.classList.remove("grey"),paletteBorderGithub.classList.add("orange"),data.palette=2),"color-palette-3"===e.currentTarget.value&&(paletteName.classList.remove("dark-red"),paletteName.classList.remove("dark-green"),paletteName.classList.add("dark-grey"),paletteJob.classList.remove("green"),paletteJob.classList.remove("red"),paletteJob.classList.add("yellow"),paletteBorder.classList.remove("green"),paletteBorder.classList.remove("red"),paletteBorder.classList.add("yellow"),palettePhone.classList.remove("dark-green"),palettePhone.classList.remove("dark-red"),palettePhone.classList.add("dark-grey"),paletteEmail.classList.remove("dark-green"),paletteEmail.classList.remove("dark-red"),paletteEmail.classList.add("dark-grey"),paletteLinkedin.classList.remove("dark-green"),paletteLinkedin.classList.remove("dark-red"),paletteLinkedin.classList.add("dark-grey"),paletteGithub.classList.remove("dark-green"),paletteGithub.classList.remove("dark-red"),paletteGithub.classList.add("dark-grey"),paletteBorderPhone.classList.remove("green"),paletteBorderPhone.classList.remove("orange"),paletteBorderPhone.classList.add("grey"),paletteBorderEmail.classList.remove("green"),paletteBorderEmail.classList.remove("orange"),paletteBorderEmail.classList.add("grey"),paletteBorderLinkedin.classList.remove("green"),paletteBorderLinkedin.classList.remove("orange"),paletteBorderLinkedin.classList.add("grey"),paletteBorderGithub.classList.remove("green"),paletteBorderGithub.classList.remove("orange"),paletteBorderGithub.classList.add("grey"),data.palette=3),setInLocalStorage()}paletteGreen.addEventListener("change",changeColor),paletteRed.addEventListener("change",changeColor),paletteGrey.addEventListener("change",changeColor);const inputList=document.querySelectorAll(".js-input"),cardName=document.querySelector(".js-name"),cardJob=document.querySelector(".js-job"),previewImg=document.querySelector(".js__profile-preview"),cardImg=document.querySelector(".js__profile-image"),cardTel=document.querySelector(".js-tel"),cardEmail=document.querySelector(".js-email"),cardLinkedin=document.querySelector(".js-linkedin"),cardGithub=document.querySelector(".js-github"),colorName=document.querySelector(".js-name"),colorJob=document.querySelector(".js-job"),colorBorder=document.querySelector(".js-border"),colorPhone=document.querySelector(".js-color-tel"),colorEmail=document.querySelector(".js-color-email"),colorLinkedin=document.querySelector(".js-color-linkedin"),colorGithub=document.querySelector(".js-color-github"),colorBorderPhone=document.querySelector(".js-border-tel"),colorBorderEmail=document.querySelector(".js-border-email"),colorBorderLinkedin=document.querySelector(".js-border-linkedin"),colorBorderGithub=document.querySelector(".js-border-github");let data={palette:"",name:"",job:"",phone:"",email:"",linkedin:"",github:"",photo:""};const saveField=function(e){e.preventDefault(),data[e.currentTarget.id]=e.currentTarget.value,render(),setInLocalStorage()},setInLocalStorage=()=>{const e=JSON.stringify(data);localStorage.setItem("userData",e),console.log(e)},getFromLocalStorage=()=>{const e=localStorage.getItem("userData"),r=JSON.parse(e);if(null!==r){inputList[0].value=r.name,inputList[1].value=r.job,inputList[2].value=r.phone,inputList[3].value=r.email,inputList[4].value=r.linkedin,inputList[5].value=r.github,data=r;document.querySelector("#color-palette-"+data.palette).click(),""!==data.photo&&(profileImage.style.backgroundImage=`url(${data.photo})`,profilePreview.style.backgroundImage=`url(${data.photo})`),render()}};for(const e of inputList)e.addEventListener("keyup",saveField);const render=function(){cardName.innerHTML=data.name||"Nombre Apellido",cardJob.innerHTML=data.job||"Front-end developer",cardTel.href=data.phone,cardEmail.href="mailto:"+data.email,cardLinkedin.href="https://www.linkedin.com/in/"+data.linkedin,cardGithub.href="https://github.com/"+data.github},reset=document.querySelector(".js-reset");function clickReset(){document.querySelector(".js-form").reset(),cardName.innerHTML="Nombre Apellido",data.name="",cardJob.innerHTML="Front-end developer",data.job="",previewImg.style.backgroundImage="",cardImg.style.backgroundImage="",cardTel.href="",data.phone="",cardEmail.href="mailto:",data.email="",cardLinkedin.href="https://www.linkedin.com/in/",data.linkedin="",cardGithub.href="https://github.com",data.github="",localStorage.removeItem("userData")}function colorReset(e){"color-color-1"!==e.currentTarget.value&&(colorName.classList.remove("dark-grey"),colorName.classList.remove("dark-red"),colorJob.classList.remove("red"),colorJob.classList.remove("yellow"),colorBorder.classList.remove("red"),colorBorder.classList.remove("yellow"),colorPhone.classList.remove("dark-red"),colorPhone.classList.remove("dark-grey"),colorEmail.classList.remove("dark-red"),colorEmail.classList.remove("dark-grey"),colorLinkedin.classList.remove("dark-red"),colorLinkedin.classList.remove("dark-grey"),colorGithub.classList.remove("dark-red"),colorGithub.classList.remove("dark-grey"),colorBorderPhone.classList.remove("orange"),colorBorderPhone.classList.remove("grey"),colorBorderEmail.classList.remove("orange"),colorBorderEmail.classList.remove("grey"),colorBorderLinkedin.classList.remove("orange"),colorBorderLinkedin.classList.remove("grey"),colorBorderGithub.classList.remove("orange"),colorBorderGithub.classList.remove("grey"))}reset.addEventListener("click",clickReset),reset.addEventListener("click",colorReset);const submitButton=document.querySelector(".js-createButton"),twitterLink=document.querySelector(".js-linkTwitter"),shareLink=document.querySelector(".js-createLink"),shareSection=document.querySelector(".js-success");function sendRequest(){fetch("https://us-central1-awesome-cards-cf6f0.cloudfunctions.net/card/",{method:"POST",body:JSON.stringify(data),headers:{"content-type":"application/json"}}).then((function(e){return e.json()})).then((function(e){showURL(e)})).catch((function(e){console.log(e),shareLink.innerHTML="Error en el servidor"}))}function showTwitter(){shareSection.classList.remove("hidden"),submitButton.classList.remove("create-btn__button"),submitButton.classList.add("create-btn__button--clicked")}function showURL(e){e.success?(shareLink.href=e.cardURL,shareLink.innerHTML=e.cardURL):shareLink.innerHTML="ERROR:"+e.error}function linkTwitter(e){const r=encodeURIComponent("¡Mirad qué tarjeta tan chula he creado con Frida Kards!"),t=encodeURIComponent("adalabers,promoK,frontendDevelopers"),a=shareLink.innerHTML;twitterLink.href=`https://twitter.com/intent/tweet?text=${r}&url=${a}&hashtags=${t}`}submitButton.addEventListener("click",sendRequest),submitButton.addEventListener("click",showTwitter),twitterLink.addEventListener("click",linkTwitter),getFromLocalStorage();